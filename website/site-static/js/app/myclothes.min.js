/*! myclothes - v0.0.1 - 2014-05-13 copyright by Sascha HÃ¤usler <saeschdivara@gmail.com> */ 
(function() {
    window.clothingApp = angular.module("clothing-app", [ "ngCookies", "ngResource" ]).config([ "$interpolateProvider", function($interpolateProvider) {
        return $interpolateProvider.startSymbol("{$"), $interpolateProvider.endSymbol("$}");
    } ]).run([ "$http", "$cookies", function($http, $cookies) {
        return $http.defaults.headers.common["X-Requested-With"] = "XMLHttpRequest", $http.defaults.headers.post["X-CSRFToken"] = $cookies.csrftoken, 
        $http.defaults.xsrfCookieName = "csrftoken", $http.defaults.xsrfHeaderName = "X-CSRFToken";
    } ]), clothingApp.factory("clothingTimeManager", [ "$http", "$q", "ClothingTimeFactory", function($http, $q, ClothingTimeFactory) {
        var clothingTimeManager;
        return clothingTimeManager = {
            test: 2,
            loadAll: function() {
                var deferred;
                return deferred = $q.defer(), $http.get("/api/clothing-time/").success(function(list) {
                    var clothingTime, time, times, _i, _len;
                    for (times = [], _i = 0, _len = list.length; _len > _i; _i++) clothingTime = list[_i], 
                    time = ClothingTimeFactory.$new(), time.setData(clothingTime), times.push(time);
                    return deferred.resolve(times);
                }).error(function() {
                    return deferred.reject();
                }), deferred.promise;
            }
        };
    } ]), clothingApp.controller("ClothingTimeController", [ "$scope", "clothingTimeManager", function($scope, clothingTimeManager) {
        return clothingTimeManager.loadAll().then(function() {
            return function(clothingtimeList) {
                return $scope.clothingtimes = clothingtimeList;
            };
        }(this));
    } ]);
}).call(this), function() {
    clothingApp.factory("ClothingResource", [ "$resource", function($resource) {
        return $resource("http://0.0.0.0:9222/api/clothing/:id", {
            id: "@id"
        });
    } ]), clothingApp.factory("ClothingTimeFactory", [ "ClothingResource", function(ClothingResource) {
        var ClothingTime, ClothingTimeFactory;
        return ClothingTime = function() {
            function ClothingTime(isVisible) {
                this.isVisible = null != isVisible ? isVisible : !1;
            }
            return ClothingTime.prototype.setData = function(obj) {
                var clothe_obj, clothe_url, _i, _len, _ref, _results;
                for (this.name = obj.name, this.slug = obj.slug, this.image = obj.image, this.clothes = [], 
                _ref = obj.clothes, _results = [], _i = 0, _len = _ref.length; _len > _i; _i++) clothe_url = _ref[_i], 
                clothe_obj = ClothingResource.get(clothe_url), _results.push(clothe_obj.$promise.then(function(_this) {
                    return function(data) {
                        return console.log(data), _this.clothes.push(data);
                    };
                }(this)));
                return _results;
            }, ClothingTime.prototype.setVisible = function(isVisible) {
                return this.isVisible = isVisible;
            }, ClothingTime;
        }(), ClothingTimeFactory = {
            $new: function() {
                return new ClothingTime();
            }
        };
    } ]);
}.call(this);